<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Report a Scam – ScamShield</title>
    <link rel="stylesheet" href="css/style.css" />
</head>

<body>
    <div class="spinner-overlay" id="global-spinner" aria-hidden="true">
        <div class="spinner" aria-label="Loading"></div>
    </div>
    <div class="toast-container" id="toast-container"></div>

    <header class="navbar">
        <div class="container navbar-inner">
            <a href="index.html" class="brand" aria-label="ScamShield home">
                <div class="brand-mark"></div>
                <div>
                    <div class="brand-text-main">ScamShield</div>
                    <span class="brand-text-sub">AI scam firewall</span>
                </div>
            </a>

            <button class="nav-toggle" id="nav-toggle" aria-label="Toggle navigation">
                <span class="nav-toggle-bar"></span>
            </button>

            <nav class="nav-menu" id="nav-menu" aria-label="Primary">
                <div class="nav-links">
                    <a class="nav-link" href="scan.html">Scan</a>
                    <a class="nav-link" href="report.html">Report Scam</a>
                    <a class="nav-link" href="dashboard.html">Dashboard</a>
                </div>
                <div class="nav-auth-links">
                    <a class="nav-link" href="login.html">Login</a>
                    <a class="nav-link primary" href="register.html">Get Started</a>
                </div>
            </nav>
        </div>
    </header>

    <main class="section">
        <div class="container">
            <div class="section-header" style="text-align: left; margin-bottom: 1.8rem;">
                <div class="section-kicker">Public reporting</div>
                <h1 class="section-title">Report a scam or fraud attempt</h1>
                <p class="section-subtitle" style="text-align: left;">
                    Share anonymized details of the scam so others can stay safe. This form is wired to connect with
                    your future
                    <code>/report</code> backend endpoint.
                </p>
            </div>

            <section class="card">
                <header class="card-header">
                    <h2 class="card-title">Scam report form</h2>
                    <p class="card-subtitle">
                        Do not include personally identifiable details. Focus on the content and pattern of the scam.
                    </p>
                </header>

                <form id="report-form" class="form-grid" novalidate>
                    <div class="form-field">
                        <label class="form-label" for="scamType">Scam type <span>*</span></label>
                        <select id="scamType" class="select" required>
                            <option value="">Select scam type</option>
                            <option value="phishing">Phishing (Bank / UPI / KYC)</option>
                            <option value="otp">OTP / verification fraud</option>
                            <option value="investment">Investment / trading scam</option>
                            <option value="support">Fake customer support</option>
                            <option value="romance">Romance / social scam</option>
                            <option value="other">Other</option>
                        </select>
                        <div id="scamTypeError" class="field-error"></div>
                    </div>

                    <div class="form-field">
                        <label class="form-label" for="reportedChannel">Channel</label>
                        <input id="reportedChannel" class="input" type="text"
                            placeholder="Example: WhatsApp, SMS, email, Instagram, phone call" />
                        <div class="field-hint">Optional, but helps identify where scams are most active.</div>
                    </div>

                    <div class="form-field">
                        <label class="form-label" for="reportedIdentifier">Scam URL / phone / handle</label>
                        <input id="reportedIdentifier" class="input" type="text"
                            placeholder="Example: https://secure-verification-update.com or +91-9876543210" />
                    </div>

                    <div class="form-field">
                        <label class="form-label" for="reportDescription">Description of the scam <span>*</span></label>
                        <textarea id="reportDescription" class="textarea" rows="6"
                            placeholder="Describe what happened, what they asked for, and any links or suspicious actions."
                            required></textarea>
                        <div id="reportDescriptionError" class="field-error"></div>
                        <p class="field-hint">
                            Avoid including full names, complete addresses, account numbers or other sensitive
                            personally identifiable information.
                        </p>
                    </div>

                    <div class="form-actions justify-end">
                        <button type="submit" class="btn btn-primary" id="reportButton">Submit report</button>
                    </div>
                </form>

                <div id="reportSuccess" class="field-success mt-md" style="display: none;">
                    Thank you. Your report has been captured locally. Once you connect the
                    <code>/report</code> endpoint, this will be sent to your backend for storage and analysis.
                </div>
            </section>
        </div>
    </main>

    <footer class="footer">
        <div class="container footer-inner">
            <div>© <span id="year"></span> ScamShield. Help others by reporting scams.</div>
            <div class="footer-links">
                <a class="footer-link" href="index.html">Home</a>
                <a class="footer-link" href="scan.html">Scan</a>
                <a class="footer-link" href="dashboard.html">Dashboard</a>
            </div>
        </div>
    </footer>

    <script src="js/scan.js"></script>
    <script>
        document.getElementById('year').textContent = new Date().getFullYear();

        // Wire simple client-side validation and success message
        (function () {
            const form = document.getElementById('report-form');
            const scamType = document.getElementById('scamType');
            const description = document.getElementById('reportDescription');
            const scamTypeError = document.getElementById('scamTypeError');
            const descriptionError = document.getElementById('reportDescriptionError');
            const success = document.getElementById('reportSuccess');

            form.addEventListener('submit', function (e) {
                e.preventDefault();
                scamTypeError.textContent = '';
                descriptionError.textContent = '';
                success.style.display = 'none';

                let valid = true;
                if (!scamType.value) {
                    scamTypeError.textContent = 'Please choose a scam type.';
                    valid = false;
                }
                if (!description.value.trim() || description.value.trim().length < 20) {
                    descriptionError.textContent = 'Please describe the scam with at least 20 characters.';
                    valid = false;
                }

                if (!valid) return;

                // Placeholder: connect to /report backend API here
                // Example:
                // fetch('/report', { method: 'POST', body: JSON.stringify({...}) })
                //   .then(...)

                if (window.ScamShield && typeof window.ScamShield.showToast === 'function') {
                    window.ScamShield.showToast({
                        type: 'success',
                        title: 'Report recorded',
                        message: 'Your scam report has been stored locally for now.',
                    });
                }

                success.style.display = 'block';
                form.reset();
            });
        })();
    </script>
</body>

</html>